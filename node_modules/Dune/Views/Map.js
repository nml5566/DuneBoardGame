module.exports = MapView;

var BaseView = require("./Base");

MapView.prototype = new BaseView();
MapView.prototype.constructor = MapView;

function MapView(factions) {
// TODO draw storm marker function

  var view = document.getElementById("mapscreen");
  var me = this;

  init();

  function init() {
    me.setView(view);
    initFactions();
  }

  function initFactions() {
    var Dune = require("Dune/Game");
    var dune = Dune();
    //var t = dune.newFaction('Atreides');
    //console.dir(dune);
    //console.dir(t);
    //for (var i = 0; i < factions.length; i++) {
      //var faction = dune.newFaction(factions[i]);
      //displayFactionShield(faction);
    //}
  }

  function displayFactionShield(faction) {
    var shieldImage = new Image();
    //shieldImage.src = me.getImagePath() + "atreides-shield.png";
    shieldImage.src = me.getImagePath() + "fake-shield.png";
    shieldImage.alt = faction.name + " turn";
    shieldImage.style.cursor = "pointer";
    shieldImage.style.color = "white";
    shieldImage.style.fontSize = "100px";
    shieldImage.style.textShadow = 
      "-2px -2px 0 #000, 2px -2px 0 #000, -2px 2px 0 #000, 2px 2px 0 #000";
    
    shieldImage.onclick = function() {
      view.removeChild(shieldImage);
    }

    view.appendChild(shieldImage);
  }
}
