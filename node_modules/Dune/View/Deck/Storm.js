var Loader = require("Dune/Loader");
var DeckViewDecorator = require("Dune/View/Deck/Base");
var gameView = require("Dune/View/Game");

module.exports = new StormDeckView();

function StormDeckView() {

  var stormCardImages = new Array(
    "1sector", "2sector", "3sector", "4sector", "5sector", "6sector"
  );

  loadImages();

  var args = {"getCardImage": getStormCardImage}; 
  DeckViewDecorator(this, args);

  function loadImages() {
    var loader = new Loader();

    for (var i = 0; i < stormCardImages.length; i++) 
    {
      var stormCardImage = stormCardImages[i];
      var stormImgUrl = "/img/storm/" + stormCardImage + ".png";
      stormCardImages[stormCardImage] = loader.loadImage(stormImgUrl);
    }

  }

  function getStormCardImage() 
  {
    var stormMovement = gameView.game.stormRound();
    var stormCardImage = stormCardImages[stormMovement + 'sector'];
    stormCardImage.stormMovement = stormMovement;
    return stormCardImage;
  }

}
