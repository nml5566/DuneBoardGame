var Loader = require("Dune/Loader");
var DeckViewDecorator = require("Dune/View/Deck/Base");
var treacheryDeck = require("Dune/Deck/Treachery");

module.exports = new TreacheryDeckView();

function TreacheryDeckView() 
{

  var treacheryDeckImages = new Array(
    "baliset", "chaumas", "chaumurky", "chrysknife", "cheapheroine", 
    "ellacadrug", "familyatomics", "gomjabbar", "hajr", 
    "harvester", "jubbacloak", "kulon", "lalala", "lasgun", 
    "maulapistol", "sliptip", "stunner", "thumper", "tleilaxughola", 
    "triptogamont", "weathercontrol", "shield", "snooper", "cheaphero", "karama"
  );

  var args = {"getCardImage": getNewTreacheryImage, "deckImages": [], 
    "deckPathUrl": "img/treachery/"}; 

  DeckViewDecorator(this, args);

  loadImages();

  function loadImages() {
    var loader = new Loader();

    for (var i = 0; i < treacheryDeckImages.length; i++) {
      var image = treacheryDeckImages[i];
      var treacheryImgUrl = "/img/treachery/" + image + ".png";
      treacheryDeckImages[image] = loader.loadImage(treacheryImgUrl);
    }
  }

  function getNewTreacheryImage() {
    var treacheryCard = treacheryDeck.dealCard();
    var treacheryImg = treacheryDeckImages[treacheryCard];
    return treacheryImg;
  }
}
